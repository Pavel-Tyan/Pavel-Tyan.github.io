const desktopFontSize="16px";$(document).ready(function(e){$(".accordion__button").on("click",function(e){e.preventDefault(),currentAcordionBtn=$(this),$("body").css("font-size")!=desktopFontSize?"block"==currentAcordionBtn.siblings().css("display")?currentAcordionBtn.siblings().slideUp():($(".accordion__button").siblings().slideUp(),currentAcordionBtn.siblings().slideDown()):"block"==currentAcordionBtn.nextAll().css("display")?currentAcordionBtn.nextAll().slideUp():($(".accordion__button").nextAll().slideUp(),currentAcordionBtn.nextAll().slideDown())})});let vh=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${vh}px`);const fullscreenMenu=document.querySelector(".fullscreen-menu"),fullscreenMenuOpenBtn=document.querySelector("#burger-btn"),fullscreenMenuCloseBtn=document.querySelector("#closeMenu");function closeBurgerMenu(){fullscreenMenu.style.display="none"}function openBurgerMenu(){fullscreenMenu.style.display="flex"}function hideVerticalScroll(){$("html").css("overflow-y","hidden")}function showVerticalScroll(){$("html").css("overflow-y","visible")}function modalWindowShow(){$(".modal-window").css("display","flex"),$("html").css("overflow-y","hidden")}function modalWindowClose(){$(".modal-window").css("display","none"),$("html").css("overflow-y","visible")}fullscreenMenuOpenBtn.addEventListener("click",e=>{e.preventDefault(),openBurgerMenu(),hideVerticalScroll()}),fullscreenMenuCloseBtn.addEventListener("click",e=>{e.preventDefault(),closeBurgerMenu(),showVerticalScroll()}),$(document).ready(function(e){$(".btn-close").on("click",function(e){e.preventDefault(),modalWindowClose()})});const dropDownListBtn1=document.querySelector(".products__characteristics"),dropDownList1=document.querySelector(".dropdown-list");dropDownListBtn1.addEventListener("mouseenter",e=>{dropDownListBtn1.style.backgroundColor="#E01F3D",dropDownList1.style.display="flex"}),dropDownList1.addEventListener("mouseleave",e=>{e.target==dropDownList1&&(dropDownListBtn1.style.backgroundColor="#9A9A9A",dropDownList1.style.display="none")});const dropDownListBtn2=document.querySelector(".slide-2"),dropDownList2=document.querySelector(".list-2");dropDownListBtn2.addEventListener("mouseenter",e=>{dropDownListBtn2.style.backgroundColor="#E01F3D",dropDownList2.style.display="flex"}),dropDownList2.addEventListener("mouseleave",e=>{e.target==dropDownList2&&(dropDownListBtn2.style.backgroundColor="#9A9A9A",dropDownList2.style.display="none")});const validateFields=function(e,o){return o.forEach(e=>{e.removeClass("form__error"),""==e.val().trim()&&e.addClass("form__error")}),0==$(".form__error",".form").length};function closeHorizAccordionItems(){$(".color__text").removeClass("active-horizontal-accordion-item")}function openHorizAccordionItems(e){$(e).closest(".color").find(".color__text").addClass("active-horizontal-accordion-item")}function init(){for(var e=new ymaps.Map("map",{center:[55.757521,37.616369],zoom:13,controls:[]}),o=[[55.758762,37.582924],[55.754751,37.633497],[55.746478,37.583819],[55.751949,37.603131]],n=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/icon/marker.svg",iconImageSize:[58,73],iconImageOffset:[-3,-42]}),t=0;t<o.length;t++)n.add(new ymaps.Placemark(o[t]));e.geoObjects.add(n),e.behaviors.disable("scrollZoom")}$(".form").submit(e=>{e.preventDefault();const o=$(e.currentTarget),n=o.find("[name='name']"),t=o.find("[name='phone']"),i=o.find("[name='comment']"),r=o.find("[name='to']"),l=$("#modal-window"),s=l.find(".modal-window__text");validateFields(o,[n,t,i,r])&&$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:n.val(),phone:t.val(),comment:i.val(),to:r.val()},success:e=>{s.text(e.message),modalWindowShow()},error:e=>{e=e.responseJSON.message;s.text(e),modalWindowShow()}})}),$(document).ready(function(e){$(".color__main-info-btn").on("click",function(e){e.preventDefault(),currentHorizAccordionItem=$(this),$("body").css("font-size")==desktopFontSize?currentHorizAccordionItem.next(".color__text").hasClass("active-horizontal-accordion-item")?closeHorizAccordionItems():(closeHorizAccordionItems(),openHorizAccordionItems(currentHorizAccordionItem)):currentHorizAccordionItem.next(".color__text").hasClass("active-horizontal-accordion-item")?(currentHorizAccordionItem.closest(".color").removeClass("active-horizontal-accordion-elem"),closeHorizAccordionItems()):(currentHorizAccordionItem.closest(".color").addClass("active-horizontal-accordion-elem"),closeHorizAccordionItems(),openHorizAccordionItems(currentHorizAccordionItem))}),$(".color__close-btn").on("click",function(e){e.preventDefault(),closeHorizAccordionItems(),$(".color").removeClass("active-horizontal-accordion-elem")})}),ymaps.ready(init);const sections=$("section"),display=$(".maincontent"),fixedMenu=$(".fixed-sidebar"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile();let inScroll=!1;sections.first().addClass("active");const countSectionPosition=e=>{e*=-100;return isNaN(e)?(console.error("передано не верное значение в countSectionPosition"),0):e},resetActiveClassForItem=(e,o,n)=>{e.eq(o).addClass(n).siblings().removeClass(n)};function performTransition(e){var o;0==inScroll&&(inScroll=!0,o=countSectionPosition(e),display.css({transform:`translateY(${o}%)`}),sections.eq(e).addClass("active").siblings().removeClass("active"),setTimeout(()=>{inScroll=!1,fixedMenu.find(".fixed-sidebar__button").eq(e).addClass("fixed-sidebar__active").closest(".fixed-sidebar__item").siblings().find(".fixed-sidebar__button").removeClass("fixed-sidebar__active")},1300))}function viewportScroller(e){const o=sections.filter(".active"),n=o.next(),t=o.prev();return{next(){n.length&&performTransition(n.index())},prev(){t.length&&performTransition(t.index())}}}function closeReviewDisplay(){$(".reviews__display").css("display","none")}$(window).on("wheel",e=>{e=e.originalEvent.deltaY;const o=viewportScroller();0<e&&o.next(),e<0&&o.prev()}),$(window).on("keydown",e=>{var o=e.target.tagName.toLowerCase();const n=viewportScroller();if("input"!=o&&"textarea"!=o)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$(".wrapper").on("touchmove",e=>e.preventDefault()),$("[data-scroll-to-section]").on("click",e=>{e.preventDefault;const o=$(e.currentTarget);e=o.attr("data-scroll-to-section");const n=$(`[data-section-name=${e}]`);performTransition(n.index()),fullscreenMenu.style.display="none",$("html").css("overflow-y","visible")}),isMobile&&$("body").swipe({swipe:function(e,o){const n=viewportScroller();let t="";switch(o){case"up":t="next";break;case"down":t="prev"}n[t]()}}),$(document).ready(function(){const o=$(".slider").bxSlider({pager:!1,controls:!1,touchEnabled:!1});$(".arrow-left").click(e=>{e.preventDefault(),o.goToPrevSlide(),dropDownListBtn1.style.backgroundColor="#9A9A9A",dropDownList1.style.display="none"}),$(".arrow-right").click(e=>{e.preventDefault(),o.goToNextSlide(),dropDownListBtn2.style.backgroundColor="#9A9A9A",dropDownList2.style.display="none"})}),$(document).ready(function(e){$(".review__switcher-btn").on("click",function(e){currentBtn=$(this),closeReviewDisplay(),$(".reviews__display").each(function(e,o){$(o).attr("data-linked")==currentBtn.attr("data-btn")&&$(o).css("display","flex")})})});const video=document.querySelector("#player"),durationControl=document.querySelector("#durationLevel"),soundControl=document.querySelector("#soundLevel"),playButtonVideo=document.querySelector(".video_play-button"),pauseButtonVideo=document.querySelector(".video__pause-btn"),downPlayBtnVideo=document.querySelector(".downBtn");let intervalId,soundLevel;const MAX_SOUND_VALUE=10,NORMAL_UPDATE_RANGE=1e3/66;function initPlayButton(){const e=document.querySelectorAll(".play");e.forEach(e=>{e.addEventListener("click",playStop)});const o=document.querySelector("#mic");o.addEventListener("click",soundOf)}function addListener(){video.addEventListener("click",playStop),durationControl.addEventListener("click",setVideoDuration),durationControl.addEventListener("mousedown",stopInterval),soundControl.addEventListener("click",changeSoundVolume)}function playStop(){playButtonVideo.classList.toggle("hidden"),durationControl.max=video.duration,video.paused?(intervalId=setInterval(updateDuration,NORMAL_UPDATE_RANGE),video.play(),changePauseBtnToPlayBtn()):stopInterval()}function updateDuration(){durationControl.value=video.currentTime}function setVideoDuration(){video.currentTime=durationControl.value,intervalId=setInterval(updateDuration,NORMAL_UPDATE_RANGE),video.paused&&(changePauseBtnToPlayBtn(),video.play(),playButtonVideo.classList.add("hidden"))}function stopInterval(){video.pause(),changePlayBtnToPauseBtn(),clearInterval(intervalId)}function soundOf(){0==video.volume?(video.volume=soundLevel,soundControl.value=soundLevel*MAX_SOUND_VALUE):(console.log("off"),soundLevel=video.volume,video.volume=0,soundControl.value=0)}function changeSoundVolume(){video.volume=soundControl.value/MAX_SOUND_VALUE}function changePlayBtnToPauseBtn(){$(downPlayBtnVideo).hide(),$(pauseButtonVideo).show(),console.log("asd")}function changePauseBtnToPlayBtn(){$(downPlayBtnVideo).show(),$(pauseButtonVideo).hide(),console.log("asd")}document.addEventListener("DOMContentLoaded",function(){durationControl.min=0,durationControl.value=0,soundControl.min=0,soundControl.max=MAX_SOUND_VALUE,initPlayButton(),addListener()});